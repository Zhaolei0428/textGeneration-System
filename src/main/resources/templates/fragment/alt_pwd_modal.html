<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<div th:fragment="alt-pwd-modal">
<!-- 模态框（Modal） -->
<div id="myModal" class="modal " tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title text-center" id="myModalLabel">alt password</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="oldPassword" class="col-md-2 control-label"><i class="fa fa-key">old Password </i></label>
                    <div class="col-md-10">
                        <input type="password" class="form-control" id="oldPassword" placeholder="Password" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="newPassword" class="col-md-2 control-label"><i class="fa fa-key">new Password </i></label>
                    <div class="col-md-10">
                        <input type="password" class="form-control" id="newPassword" placeholder="Password" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="repeatPassword" class="col-md-2 control-label"><i class="fa fa-key">Password </i></label>
                    <div class="col-md-10">
                        <input type="password" class="form-control" id="repeatPassword" placeholder="Repeat Password" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="form-group">
                    <div class="col-md-12">
                        <div class="btn btn-primary center-block" onclick="alt_pwd()">
                            Save modify <i class="fa fa-sign-in"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    function alt_pwd() {
        var user = {
            userName: $('#userName').text(),
            oldPassword: $('#oldPassword').val(),
            newPassword: $('#newPassword').val(),
            repeatPassword: $('#repeatPassword').val()
        };
        $.ajax({
            url: '/users/alt_pwd',
            type: 'POST',
            data: user,
            success: function (oResult) {
                console.log(oResult);
                if(oResult.status == "ok")
                {
                    confirm("Success!");
                    $('#myModal').modal('hide');
                }
                else{
                    confirm(oResult.errorString);
                }
            }
        });

    }
</script>
</div>
</html>